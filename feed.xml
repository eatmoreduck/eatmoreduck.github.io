<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>eatmoreduck</title><link>/</link><description>Recent content on eatmoreduck</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Wed, 23 Apr 2025 00:11:26 +0800</lastBuildDate><atom:link href="/feed.xml" rel="self" type="application/rss+xml"/><item><title>4 月碎碎念</title><link>/p/4-%E6%9C%88%E7%A2%8E%E7%A2%8E%E5%BF%B5/</link><pubDate>Wed, 23 Apr 2025 00:11:26 +0800</pubDate><guid>/p/4-%E6%9C%88%E7%A2%8E%E7%A2%8E%E5%BF%B5/</guid><description>&lt;h3 id="工作">工作&lt;/h3>
&lt;p>工作上一如往常，没什么特别出彩的，也没翻车，只是自己在看数据时，发现自己新写的代码里，有一处致命 bug，长期运行可能会导致线上 redis 爆掉，恰好测试没发现，又避免了一次事故报告。上次 CTO 点完一些现有团队存在的问题之后，大一点的改动都心里很发虚，有些问题还真的 code review 才发现的了，这个季度打算把一些历史遗留问题解决一下，顺便把历史没迁移的服务迁移掉。还是对自己要求高一些，犯错的可能性才能降低些（虽然犯错成本不高）。&lt;/p>
&lt;h3 id="生活">生活&lt;/h3>
&lt;p>生活已经几乎被小娃填满，小娃最近开始睡眠倒退，常常要哄很久才睡的着并且睡不久，哄 30 分钟，睡 30 分钟几乎成了日常。好在妻子给力，几乎能 cover 住，翻了翻手机相册里，近几个月拍的几乎都是跟娃有关的照片。手机上看还好，电脑上看总是感觉他怎么那么可爱。睡着刚醒的时候可爱，爆哭的时候看起来又可怜。
近期说了只能说给自己听的却又说给父母听的话，造成了不少的误会和矛盾，希望自己管住这张嘴引以为戒。
今天得知父亲的朋友家的孩子，年仅 22 岁，欠下高利贷跳楼自杀了，心里感觉很不是滋味。一方面觉得可惜，一方面又觉得现在的小孩难带，希望我的孩子我能带好。&lt;/p>
&lt;h3 id="折腾">折腾&lt;/h3>
&lt;p>关于折腾，来回重装了不下 10 次 openwrt 虚拟机之后，我慢慢的跟自己和解了，不再为了折腾二折腾，确定了3个原则，实用为主、不求完美、越少越好。&lt;/p>
&lt;ol>
&lt;li>1 * 中兴巡天 BE5100Pro+ , 2 * 中兴晴天 BE5100Pro+ mesh 组网。因为原本用的两个路由器，手动切换起来很麻烦。&lt;/li>
&lt;li>immortalwrt 旁路由配置完成，但发现自己其实没什么设备需要用它（只有 nas 用上了），大部分时候还是喜欢手动开配置，去广告手机端用 GKD，电脑端油猴解决。&lt;/li>
&lt;li>工作机的 macos 升级到最新的 Sequoia 15.4.1 。原本的系统是 macos 13，但因为当初intel 直接迁移到 arm后，右风扇在启动时会不转而且会滋滋响，我认为是因为当时的迁移导致某些配置不正常，这个拖了大概4 年一直没有解决，我期望通过升级解决这个问题。可惜非常遗憾，近期（可能会选在 51 节）恢复系统，全部重装一遍，毕竟配置开发环境是个大活&lt;/li>
&lt;li>绿群晖 DXP4800 从 DMS7.2.1 改到了绿联本身的系统。一是不喜欢群晖 app 多到爆，二是不爱群晖硬盘不能休眠，三是某天群晖启动之后web 页面刷不出，那天正好看到绿联群里说3 月开新版本，一怒之下换会绿联本身系统。目前用下来感受还行，oppo 的 live photo 没原生支持，不过通过 immch-app 外置相册暂时解决掉。短期能用就行，长期等绿联官方更新。&lt;/li>
&lt;li>nextchat重部署(硅基流动充值的还没用完)。原来的1U 机器搬家之后没再开启过，所以原来的服务也不能用了。在 nas 里还是跑了个 nextchat ，查点简单问题直接能用，复杂的仍然依赖官方的web。这一次我也忍住了去查为什么 nextchat 配合 one-api 报invalid token 的错。直接在 nextchat web 页配置硅基流动的 api，给自己个大拇哥。&lt;/li>
&lt;li>近期还在看机械键盘，目前在物色一把合适自己的矮轴键盘，看了 Nuphy 75 Air V2 ,Nuphy kick75 ，Melgeek O2 ,其中后两把都是近期出的，等过一个月有真实用户评测了再来看看，希望能买到一把喜欢的矮轴键盘&lt;/li>
&lt;/ol>
&lt;h3 id="提升">提升&lt;/h3>
&lt;p>英语课开班了，目前上了三周的发音，但自己课后作业完成的不好，老师说功夫在平时，要多努力，形成肌肉记忆了一切都很简单。这方面自己需要努力&lt;/p>
&lt;p>最近的感触还是挺多，家庭，工作方面都有，但还没有具体成面，还需要时间酝酿才能输出。
自己对待生活的态度比起三个月前稍微积极一些了，另外能稍微不那么分心的工作，这个状态很正面，希望持续努力。&lt;/p></description></item><item><title>install-immortalwrt-in-Synology</title><link>/p/install-immortalwrt-in-synology/</link><pubDate>Tue, 18 Mar 2025 14:53:23 +0800</pubDate><guid>/p/install-immortalwrt-in-synology/</guid><description>&lt;ol>
&lt;li>
&lt;p>download a iso in &lt;a class="link" href="https://immortalwrt.kyarucloud.moe/releases/23.05.4/targets/x86/64/" target="_blank" rel="noopener"
>https://immortalwrt.kyarucloud.moe/releases/23.05.4/targets/x86/64/&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>add new hard disk image &lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/20250319164340052.png"
loading="lazy"
alt="image.png"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Wait for the image to be imported &lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/20250319164427257.png"
loading="lazy"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>import a new Virtual Machine &lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/20250319164514424.png"
loading="lazy"
alt="image.png"
>&lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/20250319164530509.png"
loading="lazy"
alt="image.png"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/20250319164750558.png"
loading="lazy"
alt="image.png"
>&lt;/p>
&lt;ol start="5">
&lt;li>set vm params &lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/20250319232345769.png"
loading="lazy"
alt="image.png"
>&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/20250319164903800.png"
loading="lazy"
alt="image.png"
>&lt;/p>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/20250319164934676.png"
loading="lazy"
alt="image.png"
>&lt;/p>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/20250319232412484.png"
loading="lazy"
alt="image.png"
>&lt;/p>
&lt;ol start="6">
&lt;li>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/20250319232433502.png"
loading="lazy"
alt="image.png"
>&lt;/p>
&lt;p>vi /etc/config/network
set ipaddr to the address of the same network segment as the router and reboot
&lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/20250319232451643.png"
loading="lazy"
alt="image.png"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>after reboot , login immortalwrt in web browser by http://192.168.5.100
the default user is root, and the default password is password
&lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/20250319163252554.png"
loading="lazy"
alt="image.png"
>&lt;/p>
&lt;/li>
&lt;/ol></description></item><item><title>Create-Virtual-machine-by-UTM</title><link>/p/create-virtual-machine-by-utm/</link><pubDate>Mon, 17 Mar 2025 16:35:30 +0800</pubDate><guid>/p/create-virtual-machine-by-utm/</guid><description>&lt;ol>
&lt;li>下载 App 安装 &lt;a class="link" href="https://mac.getutm.app/" target="_blank" rel="noopener"
>https://mac.getutm.app/&lt;/a> 并打开&lt;/li>
&lt;li>创建新的虚拟机 &lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/20250317163729210.png"
loading="lazy"
alt="image.png"
>&lt;/li>
&lt;li>M1 芯片安装 x86 win10 ,因 cpu 为 arm 架构，故只能选择模拟 &lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/20250317163804627.png"
loading="lazy"
alt="image.png"
>&lt;/li>
&lt;li>创建 windows 虚拟机&lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/20250317164215439.png"
loading="lazy"
alt="image.png"
>&lt;/li>
&lt;li>选择自己喜欢的 win10 版本镜像（需提前下载）
&lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/20250317164344728.png"
loading="lazy"
alt="image.png"
>&lt;/li>
&lt;li>配置硬件参数&lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/20250317164412790.png"
loading="lazy"
alt="image.png"
>
&lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/20250317164431605.png"
loading="lazy"
alt="image.png"
>
&lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/20250317164609153.png"
loading="lazy"
alt="image.png"
>&lt;/li>
&lt;li>&lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/20250317173946665.png"
loading="lazy"
alt="image.png"
>
注意将此处 UEFI 启动关闭，否则每次开机都是重新引导安装&lt;/li>
&lt;li>后面就是一步步按操作来就行&lt;/li>
&lt;/ol></description></item><item><title>DXP4800安装SSD</title><link>/p/dxp4800-add-ssd/</link><pubDate>Fri, 08 Nov 2024 20:12:54 +0800</pubDate><guid>/p/dxp4800-add-ssd/</guid><description>&lt;ol>
&lt;li>关机&lt;/li>
&lt;li>开盖&lt;/li>
&lt;li>装 SSD&lt;/li>
&lt;li>创建 basic 类型储存池
&lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/202411082044549.png"
loading="lazy"
alt="image.png"
>&lt;/li>
&lt;li>创建 basic 类型储存空间，选择Btrfs &lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/202411082056942.png"
loading="lazy"
alt="image.png"
>&lt;/li>
&lt;li>设置新安装套件到储存池 2 &lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/202411082058747.png"
loading="lazy"
>&lt;/li>
&lt;li>通过 hyper backup先完成 docker homes 目录的备份 &lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/202411082101150.png"
loading="lazy"
alt="image.png"
>
&lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/202411082101350.png"
loading="lazy"
alt="image.png"
>&lt;/li>
&lt;/ol>
&lt;p>备份 docker homes 下的文件到共享文件夹
&lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/202411082107850.png"
loading="lazy"
alt="image.png"
>
8. 备份完成后，首先把docker、homes三个文件夹清空，然后在控制面板中依此修改每个文件夹的存储位置，让它们保存在固态硬盘上。这里记得要停用docker，否则无法迁移。
如下图所示
&lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/202411082140751.png"
loading="lazy"
alt="image.png"
>
先去套件中心停用 container manager ，停用之后，即可直接删除docker 文件夹，homes 也是同理，进入用户群组后选中权限中的 homes 取消勾选
&lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/202411082142914.png"
loading="lazy"
alt="image.png"
>&lt;/p>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/202411082144024.png"
loading="lazy"
alt="image.png"
>&lt;/p>
&lt;p>备份完了按原流程弄回去就行&lt;/p>
&lt;ol start="9">
&lt;li>原有历史套件搬家，找了个 &lt;a class="link" href="https://github.com/vletroye/SynoPackages/tree/master/DSM%207.x/MODS%20Package%20Manager%207.x" target="_blank" rel="noopener"
>https://github.com/vletroye/SynoPackages/tree/master/DSM%207.x/MODS%20Package%20Manager%207.x&lt;/a>
最后发现还是无法使用，最近才开始用套件，目前装的也不多，直接把原来卸载的都重新来一次，以下页面的服务其实是没法使用的
&lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/202411082220473.png"
loading="lazy"
alt="image.png"
>&lt;/li>
&lt;/ol>
&lt;p>完成以上所有操作之后，后续的套件都安装到ssd，无论是打开还是安装的速度都快了许多，后续再配置一个定时任务，定时将 docker 从 SSD 备份到 HHD 即可&lt;/p></description></item><item><title>远程访问系列（一）公网IP</title><link>/p/wan-to-lan-via-public-ipv4/</link><pubDate>Wed, 06 Nov 2024 10:25:04 +0800</pubDate><guid>/p/wan-to-lan-via-public-ipv4/</guid><description>&lt;p>最近新入了个 NAS ，设备是绿联 DXP4800，装上黑裙之后，首要的问题是解决最常用的照片文件同步问题，上文已经解决过，参见 &lt;a class="link" href="https://blog.xiaohuangyu.space/p/dxp4800-synology/" target="_blank" rel="noopener"
>DXP4800-黑群晖小记&lt;/a>](&lt;a class="link" href="https://blog.xiaohuangyu.space/p/dxp4800-synology/" target="_blank" rel="noopener"
>https://blog.xiaohuangyu.space/p/dxp4800-synology/&lt;/a>) 研究了几种外网访问内网设备的方案，在这里做个总结。本文是该系列的开篇，主要介绍各种方案的优缺点和适用场景。
网上搜索外网访问内网，局域网访问，远程连接，远程访问 docker，基本都可以归类为人不在家，想访问家中的nas 及其他的设备，所以标题暂时起名为远程访问系列&lt;/p>
&lt;h1 id="远程访问方案梳理">远程访问方案梳理&lt;/h1>
&lt;h3 id="1-基于公网-ip-的直接访问方案">1. 基于公网 IP 的直接访问方案&lt;/h3>
&lt;ul>
&lt;li>&lt;strong>优点&lt;/strong>：直接利用公网 IP 访问，无需中转，速度快。支持 ipv4/ipv6。&lt;/li>
&lt;li>&lt;strong>缺点&lt;/strong>：依赖运营商分配公网 IP，安全风险高。&lt;/li>
&lt;li>&lt;strong>适用场景&lt;/strong>：有公网 IP 的网络环境，如部分企业专线、有公网 IP 的家庭网络。&lt;/li>
&lt;/ul>
&lt;h3 id="2-vpn虚拟专用网络方案">2. VPN（虚拟专用网络）方案&lt;/h3>
&lt;ul>
&lt;li>&lt;strong>优点&lt;/strong>：安全加密，可完整访问内网。&lt;/li>
&lt;li>&lt;strong>缺点&lt;/strong>：需服务器或依赖 Cloudflare 服务，配置复杂。&lt;/li>
&lt;li>&lt;strong>适用场景&lt;/strong>：企业办公环境。&lt;/li>
&lt;li>&lt;strong>软件推荐&lt;/strong>：OpenVPN、WireGuard。&lt;/li>
&lt;/ul>
&lt;h3 id="3-内网穿透方案">3. 内网穿透方案&lt;/h3>
&lt;ul>
&lt;li>&lt;strong>优点&lt;/strong>：无需公网 IP，配置灵活。&lt;/li>
&lt;li>&lt;strong>缺点&lt;/strong>：依赖中转服务器，且访问速度与中转服务器带宽有关，需要额外付费，并且可能有延迟。&lt;/li>
&lt;li>&lt;strong>适用场景&lt;/strong>：临时远程访问，如开发测试。&lt;/li>
&lt;li>&lt;strong>软件推荐&lt;/strong>：frp、ngrok。&lt;/li>
&lt;/ul>
&lt;h3 id="4-zerotier-异地组网方案">4. ZeroTier 异地组网方案&lt;/h3>
&lt;ul>
&lt;li>&lt;strong>优点&lt;/strong>：P2P 连接，配置简单。&lt;/li>
&lt;li>&lt;strong>缺点&lt;/strong>：免费版限制设备数量，且存在打洞失败几率，但可使用自建 planet 一类的来突破限制（需要服务器）。&lt;/li>
&lt;li>&lt;strong>适用场景&lt;/strong>：小型组网，如家庭网络。&lt;/li>
&lt;/ul>
&lt;h3 id="5-cloudflare-tunnel-方案">5. Cloudflare Tunnel 方案&lt;/h3>
&lt;ul>
&lt;li>&lt;strong>优点&lt;/strong>：安全性高，配置简单。&lt;/li>
&lt;li>&lt;strong>缺点&lt;/strong>：依赖 Cloudflare 服务，因众所周知的原因速度访问巨慢。&lt;/li>
&lt;li>&lt;strong>适用场景&lt;/strong>：Web 服务、应用访问。&lt;/li>
&lt;/ul>
&lt;p>个人比较推荐方案 1和方案 4，理由如下&lt;/p>
&lt;ol>
&lt;li>付费少&lt;/li>
&lt;li>配置相对简单&lt;/li>
&lt;li>打通之后，需要少量配置或无需配置即可实现多设备访问&lt;/li>
&lt;/ol>
&lt;p>本文先介绍如何使用公网 ip 来进行远程访问，本文先假定能够开通 ipv4,具体操作步骤如下&lt;/p>
&lt;h1 id="基于公网-ipv4-的直接访问方案">基于公网 IPV4 的直接访问方案&lt;/h1>
&lt;h2 id="一获取公网ip">一、获取公网IP&lt;/h2>
&lt;h3 id="1-申请公网ip">1. 申请公网IP&lt;/h3>
&lt;ul>
&lt;li>联系宽带运营商客服申请开通公网IP&lt;/li>
&lt;li>根据运营商政策可能需要更换套餐或支付额外费用&lt;/li>
&lt;li>可能获得的公网IP类型：
&lt;ul>
&lt;li>固定IPv4（地址不变，费用较高，一般申请不到）&lt;/li>
&lt;li>动态IPv4（光猫重启后地址可能会变化，所以需要域名配合ddns 解析）&lt;/li>
&lt;li>动态IPv6（现在运营商普遍支持，但需要配合动态 dns 解析）&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="2-验证公网ip">2. 验证公网IP&lt;/h3>
&lt;ul>
&lt;li>访问 &lt;a class="link" href="https://ip138.com/" target="_blank" rel="noopener"
>https://ip138.com/&lt;/a> 或直接百度搜 ip 查询当前 ip&lt;/li>
&lt;li>使用命令行工具检查：
&lt;ul>
&lt;li>Windows: ipconfig /all&lt;/li>
&lt;li>Linux/Mac: ifconfig 或 ip addr&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>注意区分内网IP（192.168.x.x、10.x.x.x等）和公网IP，且注意路由器或光猫是否响应 ping 命令&lt;/li>
&lt;/ul>
&lt;h2 id="二网络环境配置">二、网络环境配置&lt;/h2>
&lt;h3 id="1-光猫设置">1. 光猫设置&lt;/h3>
&lt;ul>
&lt;li>理想情况：直接在光猫配置端口转发
&lt;ul>
&lt;li>需要运营商提供超级管理员密码&lt;/li>
&lt;li>配置较简单，性能较好&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>现实情况：多数无法获取超级管理员权限，且光猫性能垃圾，多设备连接了之后会异常卡
&lt;ul>
&lt;li>需要将光猫改为桥接模式，自己额外接路由器&lt;/li>
&lt;li>可能需要运营商远程协助设置&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="可能遇到的问题及解决方案">可能遇到的问题及解决方案&lt;/h4>
&lt;ol>
&lt;li>运营商不给开公网ip =&amp;gt; 投诉&lt;/li>
&lt;li>运营商不给开桥接 =》 投诉&lt;/li>
&lt;/ol>
&lt;h3 id="2-路由器配置">2. 路由器配置&lt;/h3>
&lt;ul>
&lt;li>选购支持端口转发的路由器&lt;/li>
&lt;li>设置路由器PPPoE拨号
&lt;ul>
&lt;li>输入宽带账号密码&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>配置端口转发
&lt;ul>
&lt;li>选择需要转发的内部端口&lt;/li>
&lt;li>设置对应的外部端口&lt;/li>
&lt;li>指定内网设备IP地址&lt;/li>
&lt;li>选择协议类型（TCP/UDP）&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="可能遇到的问题及解决方案-1">可能遇到的问题及解决方案&lt;/h4>
&lt;ol>
&lt;li>拿不到宽带账号密码 =》 投诉&lt;/li>
&lt;li>验证自己的路由器是否获取到公网 ip =》 &lt;a class="link" href="https://ip138.com" target="_blank" rel="noopener"
>https://ip138.com&lt;/a> 看ip 是否与路由器后台 ip 一致，且不为192.168.xxx.xxx ，不为 10.xx.xx.xx&lt;/li>
&lt;li>验证端口转发是否生效 =&amp;gt; 假定获取到的公网ip 为 222.71.193.9 配置的转发为 9999 端口转发到内网 192.168.1.200 机器的 5001 端口，则执行命令&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;gt; telnet 222.71.193.9 9999 回车
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Trying 222.71.193.9...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Connected to 222.71.193.9.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Escape character is &amp;#39;^]&amp;#39;. (出现这行表示正常，如果没出现则依次排查应用状态，防火墙状态，端口转发是否正确)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="3-防火墙设置">3. 防火墙设置&lt;/h3>
&lt;ul>
&lt;li>路由器防火墙配置
&lt;ul>
&lt;li>开放必要端口&lt;/li>
&lt;li>设置访问控制规则&lt;/li>
&lt;li>启用基本安全防护&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>内网设备防火墙配置
&lt;ul>
&lt;li>允许相关端口访问&lt;/li>
&lt;li>配置访问白名单&lt;/li>
&lt;li>启用安全防护措施&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>完成上述配置之后，在外网可以直接通过 http://公网ip:端口转发外部port 访问相关的 web 应用,此处的 ip 为公网 ip，port 为配置的外网端口转发，假定获取到的公网ip 为 222.71.193.9 配置的转发为 9999 端口转发到内网 192.168.1.200 机器的 5000 端口（群晖默认端口），则访问地址为
http://222.71.193.9:9999 ，但运营商给的是动态 ip，可能会在某些特定的时候自动改变，或者是在路由器重启时重新分配，重新分配之后，就原来的方式就不能访问了，所以为了使用方便，都希望直接使用某个域名来远程访问内部服务，接下来就需要介绍后续DDNS 了&lt;/p>
&lt;p>DDNS （Dynamic DNS), 熟悉 DNS 的小伙伴都知道 DNS 是将域名转为 IP 地址的服务，直接复习下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> DDNS（动态域名系统）和DNS（域名系统）是两个相关但不同的概念。以下是它们的主要区别：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">### DNS（域名系统）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- **全球性服务**：DNS是一个全球性的服务，它将人类易于记忆的域名转换为计算机使用的IP地址。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- **静态解析**：传统的DNS服务通常用于静态IP地址，即域名与IP地址的映射是固定的，不会随时间变化。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- **分布式系统**：DNS是一个分层的分布式系统，包括根服务器、顶级域名服务器、权威名称服务器和递归服务器。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- **缓存机制**：DNS查询结果通常被缓存，以提高解析速度和减轻DNS服务器的负载。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- **适用于静态IP**：对于拥有静态公网IP的用户或企业来说，传统的DNS服务是合适的。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">### DDNS（动态域名系统）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- **动态IP支持**：DDNS服务允许用户将一个固定的域名与动态变化的IP地址关联起来，特别适用于家庭用户和小型办公室，他们的公网IP地址可能会因为重新连接互联网而变化。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- **自动更新**：DDNS服务会自动检测IP地址的变化，并更新DNS记录，确保域名始终指向当前的IP地址。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- **依赖第三方服务**：DDNS服务通常由第三方提供商提供，用户需要在服务提供商的平台上注册域名，并配置DDNS服务。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- **客户端软件**：用户通常需要在本地网络设备上安装客户端软件，该软件会监测IP地址的变化，并与DDNS服务提供商的服务器通信以更新DNS记录。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- **适用于动态IP**：对于没有静态公网IP的用户来说，DDNS服务是必要的，以便他们能够通过一个固定的域名来访问或管理他们的网络设备。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">总结来说，DNS是一个全球性的域名解析服务，而DDNS是DNS服务的一个扩展，专门为动态IP地址提供域名解析服务。DDNS解决了动态IP地址环境下域名解析的问题，使得用户可以通过一个固定的域名来访问他们的设备，即使这些设备的IP地址可能会变化。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>DDNS是直接将域名转化为动态 ip，这样我们配置好之后就直接能用固定的域名访问内网中的各种服务了&lt;/p>
&lt;h2 id="三域名解析配置可选">三、域名解析配置（可选）&lt;/h2>
&lt;h3 id="1-域名准备">1. 域名准备&lt;/h3>
&lt;ul>
&lt;li>购买域名&lt;/li>
&lt;li>配置DNS服务器&lt;/li>
&lt;/ul>
&lt;h3 id="2-ddns配置">2. DDNS配置&lt;/h3>
&lt;ul>
&lt;li>选择DDNS软件
&lt;ul>
&lt;li>DDNS-GO&lt;/li>
&lt;li>Lucky&lt;/li>
&lt;li>NO-IP&lt;/li>
&lt;li>花生壳&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>软件配置
&lt;ul>
&lt;li>设置域名提供商API，网上教程太多 不过多赘述，参考各个软件官方文档即可&lt;/li>
&lt;li>配置更新间隔&lt;/li>
&lt;li>选择需要解析的域名&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>运行方式
&lt;ul>
&lt;li>物理机直接运行&lt;/li>
&lt;li>Docker容器运行&lt;/li>
&lt;li>路由器插件运行&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="3-解析验证">3. 解析验证&lt;/h3>
&lt;ul>
&lt;li>测试域名解析是否正确&lt;/li>
&lt;/ul>
&lt;h4 id="可能遇到的问题及解决方案-2">可能遇到的问题及解决方案&lt;/h4>
&lt;ol>
&lt;li>测试域名解析是否正确 =&amp;gt;&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">❯ ping 你配置在 ddns 软件里的域名 比如
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ping nas.abcdefg.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PING nas.abcdefg.com (222.71.193.9): 56 data bytes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">64 bytes from 222.71.193.9: icmp_seq=0 ttl=50 time=12.410 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">64 bytes from 222.71.193.9: icmp_seq=1 ttl=50 time=13.020 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">64 bytes from 222.71.193.9: icmp_seq=2 ttl=50 time=15.120 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">重复出现的 ip与自己公网 ip 一致即可
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>如果在配置 ddns 之前如果都没问题，但是 ddns 解析有问题，可能需要关注下自己是否使用了相关代理软件，修改代理规则，我曾经遇到过使用 cloudflare 的 dns，同时在路由器上配置了代理，再使用 ddns 时发现 cloudflare 上的 dns 解析一直是解析到某海外 ip，排查之后发现是规则设置的问题&lt;/strong>&lt;/p>
&lt;h2 id="四测试验证">四、测试验证&lt;/h2>
&lt;p>测试部分，不做过多数据测试，能满足自己要求即可&lt;/p>
&lt;h3 id="1-基础连通性测试">1. 基础连通性测试&lt;/h3>
&lt;ul>
&lt;li>Ping测试
&lt;ul>
&lt;li>ping 公网IP&lt;/li>
&lt;li>ping 域名（如果配置了域名）&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>端口检测
&lt;ul>
&lt;li>使用在线端口检测工具&lt;/li>
&lt;li>telnet测试端口连通性&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="2-性能测试">2. 性能测试&lt;/h3>
&lt;ul>
&lt;li>带宽测试&lt;/li>
&lt;li>延迟测试&lt;/li>
&lt;li>稳定性测试&lt;/li>
&lt;/ul></description></item><item><title>DXP4800-黑群晖小记</title><link>/p/dxp4800-synology/</link><pubDate>Sun, 03 Nov 2024 00:00:00 +0800</pubDate><guid>/p/dxp4800-synology/</guid><description>&lt;p>黑群晖安装步骤略，引导盘+ 关闭内置 EMMC 网上教程比较多，不过多赘述，安装参考&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">绿联nas 关闭watchdog 及修改启动方式教程
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[https://post.smzdm.com/p/a3xnev8n/](https://post.smzdm.com/p/a3xnev8n/)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">绿联黑群晖
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[https://post.smzdm.com/p/a07nw4zr/](https://post.smzdm.com/p/a07nw4zr/)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">黑群晖安装教程
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[https://post.smzdm.com/p/akk9vpkr/](https://post.smzdm.com/p/akk9vpkr/)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024 年就 10 月黑群晖 nas 教程
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[https://www.bilibili.com/video/BV1XN2QYWEAi/?spm_id_from=333.337.search-card.all.click&amp;amp;vd_source=c50111db380d4669d222dbf4f28aa85a](https://www.bilibili.com/video/BV1XN2QYWEAi/?spm_id_from=333.337.search-card.all.click&amp;amp;vd_source=c50111db380d4669d222dbf4f28aa85a)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="已解决">已解决&lt;/h2>
&lt;ol>
&lt;li>解决视频HEIC不能播放问题，需要安装 AME 套件并激活，参见 &lt;a class="link" href="https://post.smzdm.com/p/a7pw05r9/" target="_blank" rel="noopener"
>https://post.smzdm.com/p/a7pw05r9/&lt;/a>&lt;/li>
&lt;li>更新小红点问题： 更改/etc/host,增加127.0.0.1 update.synology.com（未解决，后续再做）&lt;/li>
&lt;li>MOV 视频封面不显示问题，升级ffmpeg 套件，从 4 升级到 6 后重建索引解决 ，参见 &lt;a class="link" href="https://blog.csdn.net/qq_44726883/article/details/140429626" target="_blank" rel="noopener"
>https://blog.csdn.net/qq_44726883/article/details/140429626&lt;/a>&lt;/li>
&lt;li>硬盘灯闪烁问题，不影响使用，故暂不解决，参见&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">https://www.langog.com/?p=0f263caf-d8a0-4627-b458-7f1df146b88a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">https://github.com/miskcoo/ugreen_leds_controller
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="5">
&lt;li>群晖信息显示监控 ，ssh 安装 sensors 插件即可，&lt;a class="link" href="https://post.smzdm.com/p/a8xze450/" target="_blank" rel="noopener"
>https://post.smzdm.com/p/a8xze450/&lt;/a>，后期使用hertzbeat 统一监控（11 月 1 日解决问题 3 后，重建索引时，发现 cpu 温度跟面板温度似乎一样&lt;/li>
&lt;li>风扇问题，风扇无法自定义调节转速，暂时直接拉风速到 100 参见连接
&lt;a class="link" href="https://post.smzdm.com/p/a0xk4el8/?sort_tab=hot/#comments" target="_blank" rel="noopener"
>https://post.smzdm.com/p/a0xk4el8/?sort_tab=hot/#comments&lt;/a>&lt;/li>
&lt;li>外网访问,zerotier 已打通内外网访问，自建 planet 来搞定外网访问问题&lt;/li>
&lt;li>公网 ip v4 已开通，ddns-go + 端口转发 + Let’s Encrypt 完成整个网络搭建&lt;/li>
&lt;li>软件问题，主要设备平台为Android + mac 常用软件下载参考&lt;a class="link" href="https://www.synology.cn/zh-cn/support/download?version=7.2#utilities" target="_blank" rel="noopener"
>https://www.synology.cn/zh-cn/support/download?version=7.2#utilities&lt;/a>&lt;/li>
&lt;li>nas 内置docker 容器跑
&lt;ol>
&lt;li>&lt;del>immich作为群晖相册补充&lt;/del> （因群晖相册已足够，暂时不用）&lt;/li>
&lt;li>jellyfin&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>2015mac docker容器
&lt;ol>
&lt;li>heatzbeat 做为整个局域网的监控&lt;/li>
&lt;li>alist 挂百度网盘，夸克网盘，阿里云网盘&lt;/li>
&lt;li>gitlab&lt;/li>
&lt;li>gitlab-runner&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;p>经过一系列折腾之后，目前公网访问已经无问题，如果 ddns 挂了，也有自建 zerotier 能作为补充使用，后续考虑加一个 UPS 及两条 512 的 SSD 组 raid1 作为 docker 及虚拟机盘&lt;/p>
&lt;h2 id="待办">待办&lt;/h2>
&lt;ol>
&lt;li>&lt;del>因使用内置ddns 时出现过梅林固件上的 clash 规则问题，导致 ddns 出现错误的 ip（实际为代理的 ip），后续考虑增加一个软路由&lt;/del> （新版 Merlin Clash已支持自定义规则，可以在访问 api.cloudflare.com 时不使用代理）&lt;/li>
&lt;li>公网 ipv4 访问不是很安全，考虑后续将 ddns 迁移到群晖中，直接开ipv6 访问&lt;/li>
&lt;li>&lt;del>群晖链路聚合开启&lt;/del> （RAX50 不支持链路聚合，lan 口只能到千兆，跑不满绿联 2.5G 带宽）&lt;/li>
&lt;li>时间机器构建&lt;/li>
&lt;li>mac 常用文件自动备份到群晖任务构建&lt;/li>
&lt;li>冷备份任务构建&lt;/li>
&lt;li>2015mac docker容器配置及配置文件备份&lt;/li>
&lt;li>7 中的关键任务自动同步到群晖防丢失&lt;/li>
&lt;li>考虑将此次黑裙关键步骤细化，落为文档，防丢失&lt;/li>
&lt;li>风扇自动调速脚本配置，目前弄了个简版，后续再配置和优化&lt;/li>
&lt;/ol>
&lt;h2 id="风扇转速脚本待测试">风扇转速脚本（待测试）&lt;/h2>
&lt;p>保存为 fan_control.sh，然后执行脚本&lt;/p>
&lt;p>chmod +x fan_control.sh
sudo ./fan_control.sh&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">FAN_CONTROL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/sys/devices/platform/it87.2608/hwmon/hwmon2/pwm3&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 检查必要的命令是否存在&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">command&lt;/span> -v sensors &amp;gt;/dev/null 2&amp;gt;&lt;span class="p">&amp;amp;&lt;/span>&lt;span class="m">1&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="o">{&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;需要安装 lm-sensors，请先运行: apt-get install lm-sensors&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nb">exit&lt;/span> 1&lt;span class="p">;&lt;/span> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">command&lt;/span> -v bc &amp;gt;/dev/null 2&amp;gt;&lt;span class="p">&amp;amp;&lt;/span>&lt;span class="m">1&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="o">{&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;需要安装 bc，请先运行: apt-get install bc&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nb">exit&lt;/span> 1&lt;span class="p">;&lt;/span> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 检查文件权限和路径&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> ! -w &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$FAN_CONTROL&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;错误: 无法写入风扇控制文件 &lt;/span>&lt;span class="nv">$FAN_CONTROL&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;请确保以root权限运行此脚本&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">exit&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 检查风扇控制模式设置是否成功&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> ! &lt;span class="nb">echo&lt;/span> &lt;span class="m">1&lt;/span> &amp;gt; /sys/devices/platform/it87.2608/hwmon/hwmon2/pwm3_enable&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;错误: 无法设置风扇控制模式&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">exit&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 初始化变量&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">declare&lt;/span> -a &lt;span class="nv">temp_history&lt;/span>&lt;span class="o">=()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">current_pwm&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">85&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">NORMAL_INTERVAL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">15&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">HIGH_TEMP_INTERVAL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">TEMP_THRESHOLD&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">45&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">MIN_PWM&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">55&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">MAX_PWM&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">255&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">LOG_FILE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/var/log/fan_control.log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 创建日志文件（如果不存在）&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">touch &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$LOG_FILE&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> 2&amp;gt;/dev/null &lt;span class="o">||&lt;/span> &lt;span class="o">{&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;错误: 无法创建日志文件&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nb">exit&lt;/span> 1&lt;span class="p">;&lt;/span> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 温度读取函数&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">get_temp&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">local&lt;/span> temp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">temp&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>sensors &lt;span class="p">|&lt;/span> grep &lt;span class="s2">&amp;#34;Package id 0:&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;{print $4}&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> tr -d &lt;span class="s1">&amp;#39;+°C&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 检查温度读取是否成功&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> ! &lt;span class="nv">$temp&lt;/span> &lt;span class="o">=&lt;/span>~ ^&lt;span class="o">[&lt;/span>0-9&lt;span class="o">]&lt;/span>+&lt;span class="o">(&lt;/span>&lt;span class="se">\.&lt;/span>&lt;span class="o">[&lt;/span>0-9&lt;span class="o">]&lt;/span>+&lt;span class="o">)&lt;/span>?$ &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;错误: 无法正确读取温度&amp;#34;&lt;/span> &amp;gt;&amp;gt; &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$LOG_FILE&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 检查温度是否在合理范围内 (-20到100度)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">((&lt;/span> &lt;span class="k">$(&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$temp&lt;/span>&lt;span class="s2"> &amp;lt; -20 || &lt;/span>&lt;span class="nv">$temp&lt;/span>&lt;span class="s2"> &amp;gt; 100&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> bc -l&lt;span class="k">)&lt;/span> &lt;span class="o">))&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;警告: 温度读数异常: &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">temp&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">°C&amp;#34;&lt;/span> &amp;gt;&amp;gt; &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$LOG_FILE&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$temp&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 设置风扇转速函数&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set_fan_speed&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">local&lt;/span> &lt;span class="nv">pwm&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 确保PWM值在有效范围内&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="nv">$pwm&lt;/span> -lt &lt;span class="nv">$MIN_PWM&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">pwm&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$MIN_PWM&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="nv">$pwm&lt;/span> -gt &lt;span class="nv">$MAX_PWM&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">pwm&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$MAX_PWM&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 尝试设置风扇转速&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> ! &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$pwm&lt;/span> &amp;gt; &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$FAN_CONTROL&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;错误: 设置风扇转速失败: &lt;/span>&lt;span class="nv">$pwm&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &amp;gt;&amp;gt; &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$LOG_FILE&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 主循环&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">while&lt;/span> true&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 获取CPU温度&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">TEMP&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>get_temp&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="nv">$?&lt;/span> -ne &lt;span class="m">0&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 温度读取失败，使用保守的风扇设置&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;警告: 温度读取失败，使用默认风扇设置&amp;#34;&lt;/span> &amp;gt;&amp;gt; &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$LOG_FILE&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> set_fan_speed &lt;span class="m">150&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sleep &lt;span class="nv">$NORMAL_INTERVAL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">continue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 根据温度设置检测间隔&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">((&lt;/span> &lt;span class="k">$(&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$TEMP&lt;/span>&lt;span class="s2"> &amp;gt;= &lt;/span>&lt;span class="nv">$TEMP_THRESHOLD&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> bc -l&lt;span class="k">)&lt;/span> &lt;span class="o">))&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">sleep_interval&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$HIGH_TEMP_INTERVAL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">sleep_interval&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$NORMAL_INTERVAL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 设置目标风扇转速&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">((&lt;/span> &lt;span class="k">$(&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$TEMP&lt;/span>&lt;span class="s2"> &amp;lt; 30&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> bc -l&lt;span class="k">)&lt;/span> &lt;span class="o">))&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">target_pwm&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$MIN_PWM&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="o">((&lt;/span> &lt;span class="k">$(&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$TEMP&lt;/span>&lt;span class="s2"> &amp;gt;= 30 &amp;amp;&amp;amp; &lt;/span>&lt;span class="nv">$TEMP&lt;/span>&lt;span class="s2"> &amp;lt; 35&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> bc -l&lt;span class="k">)&lt;/span> &lt;span class="o">))&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">target_pwm&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">85&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="o">((&lt;/span> &lt;span class="k">$(&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$TEMP&lt;/span>&lt;span class="s2"> &amp;gt;= 35 &amp;amp;&amp;amp; &lt;/span>&lt;span class="nv">$TEMP&lt;/span>&lt;span class="s2"> &amp;lt; 40&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> bc -l&lt;span class="k">)&lt;/span> &lt;span class="o">))&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">target_pwm&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">120&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="o">((&lt;/span> &lt;span class="k">$(&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$TEMP&lt;/span>&lt;span class="s2"> &amp;gt;= 40 &amp;amp;&amp;amp; &lt;/span>&lt;span class="nv">$TEMP&lt;/span>&lt;span class="s2"> &amp;lt; 45&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> bc -l&lt;span class="k">)&lt;/span> &lt;span class="o">))&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">target_pwm&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">150&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="o">((&lt;/span> &lt;span class="k">$(&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$TEMP&lt;/span>&lt;span class="s2"> &amp;gt;= 45 &amp;amp;&amp;amp; &lt;/span>&lt;span class="nv">$TEMP&lt;/span>&lt;span class="s2"> &amp;lt; 50&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> bc -l&lt;span class="k">)&lt;/span> &lt;span class="o">))&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">target_pwm&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">180&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="o">((&lt;/span> &lt;span class="k">$(&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$TEMP&lt;/span>&lt;span class="s2"> &amp;gt;= 50 &amp;amp;&amp;amp; &lt;/span>&lt;span class="nv">$TEMP&lt;/span>&lt;span class="s2"> &amp;lt; 55&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> bc -l&lt;span class="k">)&lt;/span> &lt;span class="o">))&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">target_pwm&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">200&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="o">((&lt;/span> &lt;span class="k">$(&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$TEMP&lt;/span>&lt;span class="s2"> &amp;gt;= 55 &amp;amp;&amp;amp; &lt;/span>&lt;span class="nv">$TEMP&lt;/span>&lt;span class="s2"> &amp;lt; 60&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> bc -l&lt;span class="k">)&lt;/span> &lt;span class="o">))&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">target_pwm&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">225&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">target_pwm&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$MAX_PWM&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 平滑过渡&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="nv">$target_pwm&lt;/span> -gt &lt;span class="nv">$current_pwm&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">current_pwm&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$((&lt;/span> current_pwm &lt;span class="o">+&lt;/span> &lt;span class="m">8&lt;/span> &lt;span class="k">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="nv">$target_pwm&lt;/span> -lt &lt;span class="nv">$current_pwm&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">current_pwm&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$((&lt;/span> current_pwm &lt;span class="o">-&lt;/span> &lt;span class="m">3&lt;/span> &lt;span class="k">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 确保PWM值在有效范围内并设置风扇转速&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> ! set_fan_speed &lt;span class="nv">$current_pwm&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;错误: 风扇控制失败，等待下次尝试&amp;#34;&lt;/span> &amp;gt;&amp;gt; &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$LOG_FILE&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sleep &lt;span class="nv">$NORMAL_INTERVAL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">continue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 记录日志，同时检查日志文件大小&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">log_size&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>stat -f %z &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$LOG_FILE&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> 2&amp;gt;/dev/null &lt;span class="o">||&lt;/span> &lt;span class="nb">echo&lt;/span> 0&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="nv">$log_size&lt;/span> -gt &lt;span class="m">10485760&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span> &lt;span class="c1"># 10MB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mv &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$LOG_FILE&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">LOG_FILE&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">.old&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> touch &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$LOG_FILE&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>date &lt;span class="s1">&amp;#39;+%Y-%m-%d %H:%M:%S&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>&lt;span class="s2"> - Temp: &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">TEMP&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">°C, PWM: &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">current_pwm&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">, Interval: &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">sleep_interval&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">s&amp;#34;&lt;/span> &amp;gt;&amp;gt; &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$LOG_FILE&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 使用trap捕获信号&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">trap&lt;/span> &lt;span class="s1">&amp;#39;echo &amp;#34;收到终止信号，设置风扇为默认值并退出...&amp;#34;; set_fan_speed 150; exit 0&amp;#39;&lt;/span> SIGTERM SIGINT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sleep &lt;span class="nv">$sleep_interval&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>VScode进入报错code 9, signal null error</title><link>/p/vscode-code-9-error/</link><pubDate>Fri, 16 Aug 2024 10:07:54 +0800</pubDate><guid>/p/vscode-code-9-error/</guid><description>&lt;p>进入 Vscode 时，出现报错&lt;br>
Unable to resolve your shell environment: Unexpected exit code from spawned shell (code 9, signal null)&lt;/p>
&lt;p>![image.png](&lt;a class="link" href="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/202408161008789.png" target="_blank" rel="noopener"
>https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/202408161008789.png&lt;/a> =600x)&lt;/p>
&lt;p>查证go 和 go env 之后发现都没问题，最后注意到 ~/.bash_profile 中有这部分，确定造成报错的行是 &lt;strong>export NODE_OPTIONS=&amp;ndash;openssl-legacy-provider&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">#node
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">export PATH=&amp;#34;/opt/homebrew/opt/node@20/bin:$PATH&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">export LDFLAGS=&amp;#34;-L/opt/homebrew/opt/node@20/lib:$LDFLAGS&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">export CPPFLAGS=&amp;#34;-I/opt/homebrew/opt/node@20/include:$CPPFLAGS&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">export NODE_OPTIONS=--openssl-legacy-provider
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用vi编辑或者是使用其他文本编辑器打开 .bash_profile 文件&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">vi ~/.bash_profile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">按i进入编辑模式
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">找到export NODE_OPTIONS=--openssl-legacy-provider 所在行
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">在 export NODE_OPTIONS=--openssl-legacy-provider 前加#
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">最后那行变成
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#export NODE_OPTIONS=--openssl-legacy-provider
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">再按 esc 退出编辑模式
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">:wq!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">然后回车
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果不会使用 vi 可以直接终端执行&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cd $HOME &amp;amp; open .
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后用喜欢的文本编辑器打开.bash_profile 更改所在行&lt;/p>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/202409101100157.png"
loading="lazy"
alt="image.png"
>&lt;/p>
&lt;p>将NODE_OPTIONS 注释掉后，重新进入 VScode 解决&lt;/p></description></item><item><title>大善人 AI 食用指南</title><link>/p/cloudflare-worker-ai/</link><pubDate>Mon, 12 Aug 2024 14:24:33 +0800</pubDate><guid>/p/cloudflare-worker-ai/</guid><description>&lt;p>大善人 AI 食用指南&lt;/p>
&lt;p>登录之后，打开
&lt;a class="link" href="https://dash.cloudflare.com/" target="_blank" rel="noopener"
>https://dash.cloudflare.com/&lt;/a> ,保存/之后的字符串为 accountId&lt;/p>
&lt;p>再打开
&lt;a class="link" href="https://dash.cloudflare.com/profile/api-tokens" target="_blank" rel="noopener"
>https://dash.cloudflare.com/profile/api-tokens&lt;/a>
&lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/202408121425957.png"
loading="lazy"
alt="image.png"
>
&lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/202408121427156.png"
loading="lazy"
alt="image.png"
>&lt;/p>
&lt;p>这一步完成后会看到如下图，保存好自己的 Workers AI API token&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># 用户 API 令牌
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#### Workers AI API 令牌已成功创建
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">复制此令牌以访问 Cloudflare API。为安全起见，将不再显示此令牌。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后去 one-api 添加新渠道
&lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/202408121433758.png"
loading="lazy"
alt="image.png"
>&lt;/p>
&lt;p>添加完成后即可进行测试，后续可以再 next-chatgpt中直接使用
&lt;img src="https://cdn.jsdelivr.net/gh/eatmoreduck/picture-repository/blog/202408121436437.png"
loading="lazy"
alt="image.png"
>&lt;/p></description></item><item><title>七月随感</title><link>/p/thinking-in-july/</link><pubDate>Mon, 22 Jul 2024 23:52:31 +0800</pubDate><guid>/p/thinking-in-july/</guid><description>&lt;p>近期父母和弟弟都来上海，此行目的有两个，一是给父母做体检复查，二是给弟弟做眼睛手术。&lt;/p>
&lt;p>看着已经年迈的父母，心里有些许不是滋味，不知道身为长子，有些地方我做的是否不妥。父母都年事已高，可弟弟还毫不懂事，这次在未经过父母完全同意的情况下，直接从母亲手机里转钱买了 IPhone14plus ,在我看来无异于偷。或许是因为我小时候有过类似的经历，小学时从家里偷拿钱断断续续有半年，在某天也不知是被同学告发还是被父母发现，总之最后换来一顿毒打，所以对这次的事情才更为重视。人总是要为自己的行为负责，无论是父母或者是当事者本人。&lt;/p>
&lt;p>最近天气炎热，已经连续三天高温橙色预警，确实也没心思陪着父母在外面闲逛，之前来的两次，能玩能去的地方几乎已经去的差不多了，所以这次没有单独请假陪他们，只是让他们白天在家休息，晚上陪他们逛逛。客观来讲，我觉得这次我做的一般，行为上或许说的过去，妻子安排酒店，我们给父亲过生日，带他们出去逛圈溜达，但是在内心深处，总是在说父母和弟弟不沟通，不多问，想当然，有的时候也有一种哀其不幸怒其不争的感觉；或许有点夸张，但是看着弟弟的时候，总觉得完全不懂事，又呆头呆脑，问的问题大多都是废话比如这个灯是在哪，那个是在哪，这个皮搋子是通马桶还是通下水道的，理解能力有问题还不认真听。我在想或许自己 18 岁的时候，也是这样？ 又或者比他更甚。&lt;/p>
&lt;p>看见弟弟和父亲坐着躺着的姿势千奇百怪，而我每次说他们的语气总是特别冷淡，像是针对谁，希望他们不要介意，套用许多年前的话，我也是为了你们好😁。总是希望在有限的时间内教会弟弟为人处事生存之道，可是确实我说的似乎他都没认真听，我所说所做的成效甚微，大概是我方法不对，还需要针对性练习把。&lt;/p>
&lt;p>我很努力的想要维持一个平衡，既不想因为说的话太重而影响母亲的心情，又想要通过温和的语言达到我心中所想的效果，每次说的时候总是想这样会不会不好？ 有没有更好更委婉的措辞？ 这样的方式实在过于内耗，妈妈和姨妈都是一类人，容易想很多的人，或许做生意的人都这样把，在这方面我也就和弟弟一样呆头呆脑。&lt;/p>
&lt;p>我努力在做一个好儿子，不过仍然还有很多需要向妻子学习的。以后要继续加油努力了，肩上的责任和担子会越来越重。希望我的孩子我能教育好，也希望他/她能成为一个有责任心，有同理心，正直，乐观，积极的人。&lt;/p></description></item><item><title>常用软件推荐</title><link>/p/recommend-hot-software/</link><pubDate>Sun, 07 Apr 2024 15:46:48 +0800</pubDate><guid>/p/recommend-hot-software/</guid><description>&lt;p>推荐一波MacOS 常用开发类软件，也为自己做一个备份，方便日后查找&lt;/p>
&lt;h2 id="开发工具类">开发工具类&lt;/h2>
&lt;ol>
&lt;li>jetbrain 全家桶 [[https://www.jetbrains.com/]] 非开源&lt;/li>
&lt;li>vscode &lt;a class="link" href="https://code.visualstudio.com/" target="_blank" rel="noopener"
>https://code.visualstudio.com/&lt;/a>&lt;/li>
&lt;li>curosr &lt;a class="link" href="https://cursor.sh/" target="_blank" rel="noopener"
>https://cursor.sh/&lt;/a>&lt;/li>
&lt;li>Another Redis Desktop Manager &lt;a class="link" href="https://github.com/qishibo/AnotherRedisDesktopManager" target="_blank" rel="noopener"
>https://github.com/qishibo/AnotherRedisDesktopManager&lt;/a>&lt;/li>
&lt;li>Navicat &lt;a class="link" href="https://www.navicat.com.cn/products#navicat-premium-lite" target="_blank" rel="noopener"
>https://www.navicat.com.cn/products#navicat-premium-lite&lt;/a> 官方免费版本，无需破解&lt;/li>
&lt;li>sublime text &lt;a class="link" href="https://www.sublimetext.com/" target="_blank" rel="noopener"
>https://www.sublimetext.com/&lt;/a>&lt;/li>
&lt;li>Docker &lt;a class="link" href="https://www.docker.com/" target="_blank" rel="noopener"
>https://www.docker.com/&lt;/a>&lt;/li>
&lt;li>DevToys &lt;a class="link" href="https://devtoys.app/" target="_blank" rel="noopener"
>https://devtoys.app/&lt;/a>&lt;/li>
&lt;li>EasyDevo &lt;a class="link" href="https://easydevo.boringboring.design/" target="_blank" rel="noopener"
>https://easydevo.boringboring.design/&lt;/a>&lt;/li>
&lt;/ol>
&lt;h2 id="实用工具类">实用工具类&lt;/h2>
&lt;ol>
&lt;li>安卓文件传输 &lt;a class="link" href="https://www.android.com/filetransfer/" target="_blank" rel="noopener"
>https://www.android.com/filetransfer/&lt;/a>&lt;/li>
&lt;li>Neat Download Manager &lt;a class="link" href="https://www.neatdownloadmanager.com/index.php/en/" target="_blank" rel="noopener"
>https://www.neatdownloadmanager.com/index.php/en/&lt;/a> 下载器&lt;/li>
&lt;li>Mounty &lt;a class="link" href="https://mounty.app/" target="_blank" rel="noopener"
>https://mounty.app/&lt;/a>&lt;/li>
&lt;li>keka &lt;a class="link" href="https://www.keka.io/en/" target="_blank" rel="noopener"
>https://www.keka.io/en/&lt;/a> 解压缩软件&lt;/li>
&lt;li>easydict &lt;a class="link" href="https://github.com/tisfeng/Easydict" target="_blank" rel="noopener"
>https://github.com/tisfeng/Easydict&lt;/a> 词典软件&lt;/li>
&lt;li>iina &lt;a class="link" href="https://iina.io/" target="_blank" rel="noopener"
>https://iina.io/&lt;/a> 全能视频播放器&lt;/li>
&lt;li>karabiner &lt;a class="link" href="https://karabiner-elements.pqrs.org/" target="_blank" rel="noopener"
>https://karabiner-elements.pqrs.org/&lt;/a> 按键修改&lt;/li>
&lt;li>monitor control &lt;a class="link" href="https://github.com/MonitorControl/MonitorControl" target="_blank" rel="noopener"
>https://github.com/MonitorControl/MonitorControl&lt;/a> 外接显示器亮度调节&lt;/li>
&lt;li>hidden bar &lt;a class="link" href="https://github.com/dwarvesf/hidden" target="_blank" rel="noopener"
>https://github.com/dwarvesf/hidden&lt;/a> 菜单折叠&lt;/li>
&lt;li>ToothFairy &lt;a class="link" href="https://apps.apple.com/us/app/toothfairy/id1191449274?mt=12" target="_blank" rel="noopener"
>https://apps.apple.com/us/app/toothfairy/id1191449274?mt=12&lt;/a> 窗口管理&lt;/li>
&lt;li>Mac Mouse Fix &lt;a class="link" href="https://macmousefix.com/" target="_blank" rel="noopener"
>https://macmousefix.com/&lt;/a> 鼠标平滑滚动&lt;/li>
&lt;li>PicList &lt;a class="link" href="https://github.com/Kuingsmile/PicList" target="_blank" rel="noopener"
>https://github.com/Kuingsmile/PicList&lt;/a> 图床工具&lt;/li>
&lt;li>Loop &lt;a class="link" href="https://github.com/MrKai77/Loop" target="_blank" rel="noopener"
>https://github.com/MrKai77/Loop&lt;/a> 窗口快捷放大缩小&lt;/li>
&lt;li>mos &lt;a class="link" href="https://github.com/Caldis/Mos" target="_blank" rel="noopener"
>https://github.com/Caldis/Mos&lt;/a> 鼠标平滑滚动利器&lt;/li>
&lt;li>ShortcutDetective &lt;a class="link" href="https://formulae.brew.sh/cask/shortcutdetective" target="_blank" rel="noopener"
>https://formulae.brew.sh/cask/shortcutdetective&lt;/a> 快捷键冲突排查软件&lt;/li>
&lt;li>Macs Fan Control &lt;a class="link" href="https://crystalidea.com/macs-fan-control" target="_blank" rel="noopener"
>https://crystalidea.com/macs-fan-control&lt;/a> 风扇转速调节&lt;/li>
&lt;/ol>
&lt;h2 id="效率类">效率类&lt;/h2>
&lt;ol>
&lt;li>alfred &lt;a class="link" href="https://www.alfredapp.com/" target="_blank" rel="noopener"
>https://www.alfredapp.com/&lt;/a> 非开源&lt;/li>
&lt;li>滴答清单 &lt;a class="link" href="https://dida365.com/" target="_blank" rel="noopener"
>https://dida365.com/&lt;/a>&lt;/li>
&lt;li>RayCast &lt;a class="link" href="https://www.raycast.com/" target="_blank" rel="noopener"
>https://www.raycast.com/&lt;/a> 免费神作，可以作为 alfred 的替代&lt;/li>
&lt;/ol>
&lt;h2 id="终端">终端&lt;/h2>
&lt;ol>
&lt;li>iTerm2 &lt;a class="link" href="https://iterm2.com/" target="_blank" rel="noopener"
>https://iterm2.com/&lt;/a> 终端&lt;/li>
&lt;li>SecureCRT &lt;a class="link" href="https://www.vandyke.com/products/securecrt/" target="_blank" rel="noopener"
>https://www.vandyke.com/products/securecrt/&lt;/a> 非开源&lt;/li>
&lt;li>lux &lt;a class="link" href="https://github.com/iawia002/lux" target="_blank" rel="noopener"
>https://github.com/iawia002/lux&lt;/a> 免费下载器&lt;/li>
&lt;li>Termius &lt;a class="link" href="https://termius.com/s" target="_blank" rel="noopener"
>https://termius.com/s&lt;/a> 免费终端&lt;/li>
&lt;li>htop &lt;a class="link" href="https://htop.dev/" target="_blank" rel="noopener"
>https://htop.dev/&lt;/a> 升级版 top&lt;/li>
&lt;/ol>
&lt;h2 id="网络类">网络类&lt;/h2>
&lt;ol>
&lt;li>lulu &lt;a class="link" href="https://objective-see.org/products/lulu.html" target="_blank" rel="noopener"
>https://objective-see.org/products/lulu.html&lt;/a>&lt;/li>
&lt;/ol>
&lt;h2 id="chrome-插件">Chrome 插件&lt;/h2>
&lt;ol>
&lt;li>Proxy SwitchOmega &lt;a class="link" href="https://chromewebstore.google.com/detail/proxy-switchyomega/padekgcemlokbadohgkifijomclgjgif" target="_blank" rel="noopener"
>https://chromewebstore.google.com/detail/proxy-switchyomega/padekgcemlokbadohgkifijomclgjgif&lt;/a>&lt;/li>
&lt;li>ZeroOmega &lt;a class="link" href="https://chromewebstore.google.com/detail/zeroomega-proxy-switchy-m/pfnededegaaopdmhkdmcofjmoldfiped" target="_blank" rel="noopener"
>https://chromewebstore.google.com/detail/zeroomega-proxy-switchy-m/pfnededegaaopdmhkdmcofjmoldfiped&lt;/a>&lt;/li>
&lt;li>Adblock Plus &lt;a class="link" href="https://chromewebstore.google.com/detail/adblock-plus-%E5%85%8D%E8%B4%B9%E7%9A%84%E5%B9%BF%E5%91%8A%E6%8B%A6%E6%88%AA%E5%99%A8/cfhdojbkjhnklbpkdaibdccddilifddb" target="_blank" rel="noopener"
>https://chromewebstore.google.com/detail/adblock-plus-%E5%85%8D%E8%B4%B9%E7%9A%84%E5%B9%BF%E5%91%8A%E6%8B%A6%E6%88%AA%E5%99%A8/cfhdojbkjhnklbpkdaibdccddilifddb&lt;/a>&lt;/li>
&lt;li>简阅 &lt;a class="link" href="https://simpread.pro/" target="_blank" rel="noopener"
>https://simpread.pro/&lt;/a>&lt;/li>
&lt;li>Simple Allow Copy &lt;a class="link" href="https://chrome.google.com/webstore/detail/aefehdhdciieocakfobpaaolhipkcpgc" target="_blank" rel="noopener"
>https://chrome.google.com/webstore/detail/aefehdhdciieocakfobpaaolhipkcpgc&lt;/a>&lt;/li>
&lt;li>XSwitch &lt;a class="link" href="https://chrome.google.com/webstore/detail/idkjhjggpffolpidfkikidcokdkdaogg" target="_blank" rel="noopener"
>https://chrome.google.com/webstore/detail/idkjhjggpffolpidfkikidcokdkdaogg&lt;/a>&lt;/li>
&lt;li>Axure RP &lt;a class="link" href="https://chrome.google.com/webstore/detail/dogkpdfcklifaemcdfbildhcofnopogp" target="_blank" rel="noopener"
>https://chrome.google.com/webstore/detail/dogkpdfcklifaemcdfbildhcofnopogp&lt;/a>&lt;/li>
&lt;li>沉浸式翻译 &lt;a class="link" href="https://immersivetranslate.com/zh-Hans/" target="_blank" rel="noopener"
>https://immersivetranslate.com/zh-Hans/&lt;/a>&lt;/li>
&lt;li>Save All Resourcese &lt;a class="link" href="https://chromewebstore.google.com/detail/save-all-resources/abpdnfjocnmdomablahdcfnoggeeiedb?pli=1" target="_blank" rel="noopener"
>https://chromewebstore.google.com/detail/save-all-resources/abpdnfjocnmdomablahdcfnoggeeiedb?pli=1&lt;/a> 扒网站插件&lt;/li>
&lt;/ol>
&lt;h2 id="推荐网站">推荐网站&lt;/h2>
&lt;p>&lt;a class="link" href="https://wangchujiang.com/awesome-mac/README-zh.html" target="_blank" rel="noopener"
>https://wangchujiang.com/awesome-mac/README-zh.html&lt;/a>&lt;/p></description></item></channel></rss>